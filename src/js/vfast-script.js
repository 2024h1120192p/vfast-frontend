// Hardcoded JSON data
const galleryData = {
    "Bedroom 4-Bed": [
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100809.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100823.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100832.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100836.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100853.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100858.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100906.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4 beded ROOM/IMG20240720100916.jpg"
        }
    ],
    "4-5 Suit": [
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100022.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100028.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100034.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100050.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100109.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100110.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100122.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100143.jpg"
        },
        {
            "path": "src/img/VFAST Photos/4-5 Suit/IMG20240720100153.jpg"
        },
    // ],
    // "8-9 Suite": [
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100256.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100335.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100340.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100359.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100419.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100428.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100442.jpg"
        },
        {
            "path": "src/img/VFAST Photos/8-9 Suite/IMG20240720100455.jpg"
        }
    ],
    "Conference Hall": [
        {
            "path": "src/img/VFAST Photos/Conference Hall/IMG20240705114601.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Conference Hall/IMG20240705114619.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Conference Hall/IMG20240705114641.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Conference Hall/IMG20240705114652.jpg"
        }
    ],
    "Corridor": [
        {
            "path": "src/img/VFAST Photos/Corridor/IMG20240720095713.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Corridor/IMG20240720095719.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Corridor/IMG20240720095733.jpg"
        }
    ],
    "Dinning Hall": [
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104252.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104304.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104321.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104341.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104400.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104412.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall/IMG20240720104426.jpg"
        },
    // ],
    // "Dinning Hall 16": [
        {
            "path": "src/img/VFAST Photos/Dinning Hall _16/IMG20240720095306.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall _16/IMG20240720095313.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall _16/IMG20240720095333.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Dinning Hall _16/IMG20240720095336.jpg"
        }
    ],
    "Delux Room": [
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095433.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095447.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095456.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095515.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095523.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095546.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095554.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095607.jpg"
        },
        {
            "path": "src/img/VFAST Photos/DLX Room/IMG20240720095637.jpg"
        }
    ],
    "Lawn": [
        {
            "path": "src/img/VFAST Photos/Lawn/IMG20240720095813.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lawn/IMG20240720095830.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lawn/IMG20240720095834.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lawn/lawn1.jpg"
        }
    ],
    "Lobby": [
        {
            "path": "src/img/VFAST Photos/Lobby/IMG20240720104439.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lobby/IMG20240720104452.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lobby/IMG20240720104530.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Lobby/lobby1.jpg"
        }
    ],
    "Main Porch": [
        {
            "path": "src/img/VFAST Photos/Main Porch/IMG20240720104557.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Main Porch/IMG20240720104606.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Main Porch/IMG20240720104622.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Main Porch/main1.jpg"
        }
    ],
    "Facilites": [
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720100722.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104824.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104834.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104837.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104923.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104925.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104927.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104938.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720104949.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720105010.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Other Facilites/IMG20240720105017.jpg"
        }
    ],
    "Standard Room": [
        {
            "path": "src/img/VFAST Photos/Standard Room_/IMG20240720100541.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Standard Room_/IMG20240720100549.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Standard Room_/IMG20240720100601.jpg"
        },
        {
            "path": "src/img/VFAST Photos/Standard Room_/IMG20240720100607.jpg"
        }
    ]
};

const galleryContainer = document.getElementById("galleryContainer");

// Utility: Detect if an image is horizontal
function isImageHorizontal(img) {
    return img.width > img.height;
}

// Render the gallery
function renderGallery(filter = "") {
    galleryContainer.innerHTML = ""; // Clear the container

    for (const [section, images] of Object.entries(galleryData)) {
        // Skip sections that don't match the search filter
        if (filter && !section.toLowerCase().includes(filter.toLowerCase())) continue;

        // Create a section title row
        const sectionTitle = document.createElement("div");
        sectionTitle.className = "col-12 my-3";
        sectionTitle.innerHTML = `<h3 class="text-center text-uppercase">${section}</h3>`;
        galleryContainer.appendChild(sectionTitle   );

        // Create a row for images
        const row = document.createElement("div");
        row.className = "row";

        // Add images dynamically
        images.forEach(({ path }) => {
            const img = new Image();
            img.src = path;
            img.onload = () => {
                // Create the column
                const col = document.createElement("div");
                col.className = isImageHorizontal(img) ? "col-md-6 mb-3" : "d-none";

                // Bootstrap card for the image
                const card = `
                    <div class="card">
                        <div class="card-img-top" style="background-image: url('${path}'); height: 300px; background-size: cover; background-position: center;">
                        </div>
                    </div>
                `;

                col.innerHTML = card;
                row.appendChild(col);
            };
        });

        galleryContainer.appendChild(row);
    }
}

// Initialize filled gallery
renderGallery();

const searchBar = document.querySelector("#searchBar");
const searchForm = document.querySelector("#searchForm");

const roomsCard = document.querySelector("#roomsCard");

const aboutHeaderSection = document.querySelector(".aboutus-page-section");
const gallerySection = document.querySelector(".gallery-section");

searchForm.addEventListener("submit", (e)=>{
    e.preventDefault();
})

// Attach search functionality
searchBar.addEventListener("input", (e) => {
    console.log("running");
    
    var notEmpty = (e.target.value !== "");
    
    roomsCard.hidden = notEmpty;

    if(notEmpty){
        if(!aboutHeaderSection.classList.contains("pb-0")){
            aboutHeaderSection.classList.add("pb-0");
        }
        if(!gallerySection.classList.contains("pt-0")){
            gallerySection.classList.add("pt-0");
        }
    } else {
        if(aboutHeaderSection.classList.contains("pb-0")){
            aboutHeaderSection.classList.remove("pb-0");
        }
        if(gallerySection.classList.contains("pt-0")){
            gallerySection.classList.remove("pt-0");
        }
    }

    renderGallery(e.target.value); 
});