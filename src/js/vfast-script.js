// Hardcoded JSON data
const galleryData = {
    "Bedroom 4-Bed": [
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100809.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100823.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100832.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100836.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100853.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100858.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100906.webp"
        },
        {
            "path": "src/img/VFAST_photos/4 beded ROOM/IMG20240720100916.webp"
        }
    ],
    "4-5 Suit": [
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100022.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100028.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100034.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100050.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100109.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100110.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100122.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100143.webp"
        },
        {
            "path": "src/img/VFAST_photos/4-5 Suit/IMG20240720100153.webp"
        },
    ],
    "8-9 Suite": [
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100256.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100335.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100340.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100359.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100419.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100428.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100442.webp"
        },
        {
            "path": "src/img/VFAST_photos/8-9 Suite/IMG20240720100455.webp"
        }
    ],
    "Conference Hall": [
        {
            "path": "src/img/VFAST_photos/Conference Hall/IMG20240705114601.webp"
        },
        {
            "path": "src/img/VFAST_photos/Conference Hall/IMG20240705114619.webp"
        },
        {
            "path": "src/img/VFAST_photos/Conference Hall/IMG20240705114641.webp"
        },
        {
            "path": "src/img/VFAST_photos/Conference Hall/IMG20240705114652.webp"
        }
    ],
    "Corridor": [
        {
            "path": "src/img/VFAST_photos/Corridor/IMG20240720095713.webp"
        },
        {
            "path": "src/img/VFAST_photos/Corridor/IMG20240720095719.webp"
        },
        {
            "path": "src/img/VFAST_photos/Corridor/IMG20240720095733.webp"
        }
    ],
    "Dining Hall": [
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104252.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104304.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104321.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104341.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104400.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104412.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall/IMG20240720104426.webp"
        },
    ],
    "Private Dinning Hall": [
        {
            "path": "src/img/VFAST_photos/Dinning Hall _16/IMG20240720095306.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall _16/IMG20240720095313.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall _16/IMG20240720095333.webp"
        },
        {
            "path": "src/img/VFAST_photos/Dinning Hall _16/IMG20240720095336.webp"
        }
    ],
    "Standard Room": [
        {
            "path": "src/img/VFAST_photos/Standard Room_/IMG20240720100541.webp"
        },
        {
            "path": "src/img/VFAST_photos/Standard Room_/IMG20240720100549.webp"
        },
        {
            "path": "src/img/VFAST_photos/Standard Room_/IMG20240720100601.webp"
        },
        {
            "path": "src/img/VFAST_photos/Standard Room_/IMG20240720100607.webp"
        }
    ],
    "Delux Room": [
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095433.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095447.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095456.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095515.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095523.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095546.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095554.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095607.webp"
        },
        {
            "path": "src/img/VFAST_photos/DLX Room/IMG20240720095637.webp"
        }
    ],
    "Lawn": [
        {
            "path": "src/img/VFAST_photos/Lawn/IMG20240720095813.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lawn/IMG20240720095830.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lawn/IMG20240720095834.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lawn/lawn1.webp"
        }
    ],
    "Lobby": [
        {
            "path": "src/img/VFAST_photos/Lobby/IMG20240720104439.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lobby/IMG20240720104452.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lobby/IMG20240720104530.webp"
        },
        {
            "path": "src/img/VFAST_photos/Lobby/lobby1.webp"
        }
    ],
    "Main Porch": [
        {
            "path": "src/img/VFAST_photos/Main Porch/IMG20240720104557.webp"
        },
        {
            "path": "src/img/VFAST_photos/Main Porch/IMG20240720104606.webp"
        },
        {
            "path": "src/img/VFAST_photos/Main Porch/IMG20240720104622.webp"
        },
        {
            "path": "src/img/VFAST_photos/Main Porch/main1.webp"
        }
    ],
    "Facilites": [
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720100722.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104824.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104834.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104837.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104923.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104925.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104927.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104938.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720104949.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720105010.webp"
        },
        {
            "path": "src/img/VFAST_photos/Other Facilites/IMG20240720105017.webp"
        }
    ]
};

const galleryContainer = document.getElementById("galleryContainer");

// Utility: Detect if an image is horizontal
function isImageHorizontal(img) {
    return img.width > img.height;
}

// Render the gallery
function renderGallery(filter = "") {
    galleryContainer.innerHTML = ""; // Clear the container

    for (const [section, images] of Object.entries(galleryData)) {
        // Skip sections that don't match the search filter
        if (filter && !section.toLowerCase().includes(filter.toLowerCase())) continue;

        // Create a section title row
        const sectionTitle = document.createElement("div");
        sectionTitle.className = "col-12 my-3";
        sectionTitle.id = section;
        sectionTitle.innerHTML = `<h3 class="text-center text-uppercase">${section}</h3>`;
        galleryContainer.appendChild(sectionTitle);

        // Create a row for images
        const row = document.createElement("div");
        row.className = "row";

        // Add images dynamically
        images.forEach(({ path }) => {
            const img = new Image();
            img.src = path;
            img.onload = () => {
                // Create the column
                const col = document.createElement("div");
                col.className = isImageHorizontal(img) ? "col-md-6 col-lg-4 mb-3" : "col-md-6 col-lg-2 mb-3";

                // Bootstrap card for the image
                const card = `
                    <div class="card">
                        <div class="card-img-top" style="background-image: url('${path}'); height: 300px; background-size: cover; background-position: center;">
                        </div>
                    </div>
                `;

                col.innerHTML = card;
                row.appendChild(col);
            };
        });

        galleryContainer.appendChild(row);
    }
}

// Initialize filled gallery
renderGallery();

const searchBar = document.querySelector("#searchBar");
const searchForm = document.querySelector("#searchForm");

const roomsCards = document.querySelector("#roomsCards");

const aboutHeaderSection = document.querySelector(".aboutus-page-section");
const gallerySection = document.querySelector(".gallery-section");

searchForm.addEventListener("submit", (e)=>{
    e.preventDefault();
})

// Attach search functionality
searchBar.addEventListener("input", (e) => {
    console.log("running");
    
    var notEmpty = (e.target.value !== "");
    
    roomsCards.hidden = notEmpty;

    if(notEmpty){
        if(!aboutHeaderSection.classList.contains("pb-0")){
            aboutHeaderSection.classList.add("pb-0");
        }
        if(!gallerySection.classList.contains("pt-0")){
            gallerySection.classList.add("pt-0");
        }
    } else {
        if(aboutHeaderSection.classList.contains("pb-0")){
            aboutHeaderSection.classList.remove("pb-0");
        }
        if(gallerySection.classList.contains("pt-0")){
            gallerySection.classList.remove("pt-0");
        }
    }

    renderGallery(e.target.value); 
});